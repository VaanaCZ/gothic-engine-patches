// Mover sound update fix by Vaana
//
// The sound of moving movers is never updated and always
// keeps playing from one direction. This is annoying and
// my right ear has now gone deaf.

#engine [G1]
    #patch [Mover sound update fix]
        #assembler [0x005E4EB2]
            push    ecx
            mov     ecx, dword ptr [0x008CEE4C] ; zsound
            mov     edx, [ecx]
            lea     eax, [esi+184h]
            push    0
            push    eax
            call    dword ptr [edx+40h]         ; UpdateSound3D
            pop     ecx
            orgcode
        #/assembler
    #/patch
#/engine

#engine [G1A]
    #patch [Mover sound update fix]
        #assembler [0x00604F62]
            push    ecx
            mov     ecx, dword ptr [0x00914D14] ; zsound
            mov     edx, [ecx]
            lea     eax, [esi+184h]
            push    0
            push    eax
            call    dword ptr [edx+40h]         ; UpdateSound3D
            pop     ecx
            orgcode
        #/assembler
    #/patch
#/engine

#engine [G2]
    #patch [Mover sound update fix]
        #assembler [0x0060A702]
            push    ecx
            mov     ecx, dword ptr [0x009748E4] ; zsound
            mov     edx, [ecx]
            lea     eax, [esi+1A4h]
            push    0
            push    eax
            call    dword ptr [edx+40h]         ; UpdateSound3D
            pop     ecx
            orgcode
        #/assembler
    #/patch
#/engine

#engine [G2A]
    #patch [Mover sound update fix]
        #assembler [0x00611DC2]
            push    ecx
            mov     ecx, dword ptr [0x0099B03C] ; zsound
            mov     edx, [ecx]
            lea     eax, [esi+1A4h]
            push    0
            push    eax
            call    dword ptr [edx+40h]         ; UpdateSound3D
            pop     ecx
            orgcode
        #/assembler
    #/patch
#/engine
